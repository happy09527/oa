<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.auth.mapper.SysMenuMapper">

    <resultMap id="sysMenuMap" type="com.example.model.system.SysMenu" autoMapping="true">

    </resultMap>
    <select id="findMenuListByUserId" resultMap="sysMenuMap">
        select *
        from sys_menu
        where `is_deleted` = 0
          and `status` = 1
          and `id` in (select `menu_id`
                       from sys_role_menu
                       where `is_deleted` = 0
                         and `role_id` in
                             (select `role_id` from sys_user_role where `is_deleted` = 0 and `user_id` = #{userId}));

    </select>
</mapper>
